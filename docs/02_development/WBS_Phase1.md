# WBS: Phase 1 (MVP) - Todoアプリ開発

## プロジェクト情報

- **プロジェクト名**: Todoアプリ開発
- **フェーズ**: Phase 1 (MVP)
- **開始予定日**: 2025-12-14
- **完了予定日**: 2026-12-14（約1年）
- **担当者**: 自分
- **作業時間**: 週12時間（実質）
- **前提**: Java初心者（Java言語自体が初めて）

## Phase 1 スコープ

- ユーザー認証（登録、ログイン、ログアウト）
- 基本的なTodo管理（CRUD）
- カテゴリー管理
- レスポンシブUI

## WBS階層構造（Java初心者版）

```
1.0 Phase 1: MVP（81.8日 = 約1年）

├─ 1.0 Java基礎学習（12.0日）
│  ├─ 1.0.1 Java基本文法学習（7.5日）
│  ├─ 1.0.2 オブジェクト指向（3.0日）
│  ├─ 1.0.3 Maven/Gradle基礎（0.8日）
│  └─ 1.0.4 簡単なJavaプログラム作成（0.8日）
│
├─ 1.1 設計（2.7日）
│  ├─ 1.1.1 画面設計（1.3日）
│  ├─ 1.1.2 データモデル設計（0.7日）
│  └─ 1.1.3 API設計（0.7日）
│
├─ 1.2 環境構築・Spring Boot学習（8.8日）
│  ├─ 1.2.1 Spring Boot基礎学習（4.5日）
│  ├─ 1.2.2 Spring Boot + PostgreSQL環境構築（4.0日）
│  └─ 1.2.3 Gitリポジトリ初期化（0.3日）
│
├─ 1.3 バックエンド: 認証機能（30.6日）
│  ├─ 1.3.1 JPA/Hibernate基礎学習（3.0日）
│  ├─ 1.3.2 Userエンティティ作成（6.0日）
│  ├─ 1.3.3 Spring Security基礎学習（3.0日）
│  ├─ 1.3.4 ユーザー登録API（4.1日）
│  ├─ 1.3.5 パスワードハッシュ化実装（1.2日）
│  ├─ 1.3.6 JWT基礎学習（2.3日）
│  ├─ 1.3.7 ログインAPI（JWT発行）（7.0日）
│  └─ 1.3.8 JWT認証フィルター（4.0日）
│
├─ 1.4 バックエンド: Todo機能（11.5日）
│  ├─ 1.4.1 Todoエンティティ作成（2.7日）
│  ├─ 1.4.2 Todo作成API（2.3日）
│  ├─ 1.4.3 Todo一覧取得API（2.3日）
│  ├─ 1.4.4 Todo更新API（1.6日）
│  ├─ 1.4.5 Todo削除API（0.9日）
│  ├─ 1.4.6 Todo完了切り替えAPI（0.9日）
│  └─ 1.4.7 フィルタリング機能（4.6日）
│
├─ 1.5 バックエンド: Category機能（5.0日）
│  ├─ 1.5.1 Categoryエンティティ作成（1.3日）
│  ├─ 1.5.2 Category CRUD API（3.4日）
│  └─ 1.5.3 TodoとCategoryの関連付け（1.4日）
│
├─ 1.6 フロントエンド（9.5日）
│  ├─ 1.6.1 ログイン画面（1.3日）
│  ├─ 1.6.2 ユーザー登録画面（1.0日）
│  ├─ 1.6.3 Todo一覧画面（2.3日）
│  ├─ 1.6.4 Todo作成・編集フォーム（1.8日）
│  ├─ 1.6.5 カテゴリー管理画面（1.0日）
│  ├─ 1.6.6 API連携（fetch処理）（1.3日）
│  └─ 1.6.7 レスポンシブ対応（0.7日）
│
├─ 1.7 テスト・デバッグ（9.6日）
│  ├─ 1.7.1 統合テスト（手動）（3.6日）
│  └─ 1.7.2 バグ修正バッファ（6.0日）
│
└─ 1.8 ドキュメント（1.0日）
   ├─ 1.8.1 README作成（0.7日）
   └─ 1.8.2 API仕様書確認（0.3日）
```

## 詳細タスクリスト

### 1.0 Java基礎学習（12.0日）★Java初心者のための準備

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.0.1 | Java基本文法学習 | 7.5日 | なし | 基本文法の理解 | 変数、型、制御構文、配列、メソッド |
| 1.0.2 | オブジェクト指向 | 3.0日 | 1.0.1 | OOP概念の理解 | クラス、継承、インターフェース、ポリモーフィズム |
| 1.0.3 | Maven/Gradle基礎 | 0.8日 | 1.0.2 | ビルドツールの理解 | 依存関係管理、ビルド |
| 1.0.4 | 簡単なJavaプログラム作成 | 0.8日 | 1.0.3 | 練習プログラム | Hello World、簡単な計算、クラス作成 |

**1.0.1 Java基本文法学習の詳細作業**
- [x] JDKのインストール（Java 17以上推奨）★完了 2025-12-21
- [x] IDEのセットアップ（IntelliJ IDEA または Eclipse）★完了 2025-12-21
- [x] 変数と型（int, String, boolean等）★完了 2025-12-21
- [x] 演算子（算術、比較、論理）★完了 2025-12-21
- [x] 制御構文（if, switch, for, while）★完了 2025-12-21
- [x] 配列とArrayList ★完了 2025-12-21
- [x] メソッドの定義と呼び出し ★完了 2025-12-21
- [x] 例外処理（try-catch）★完了 2025-12-21
- [ ] 公式チュートリアル、オンライン学習サイト（Udemy、Progate等）を活用

**1.0.2 オブジェクト指向の詳細作業**
- [x] クラスとオブジェクトの概念 ★完了 2025-12-22
- [x] フィールドとメソッド ★完了 2025-12-22
- [x] コンストラクタ ★完了 2025-12-22
- [x] カプセル化（private, public, protected）★完了 2025-12-22
- [x] 継承（extends）★完了 2025-12-22
- [x] インターフェース（implements）★完了 2025-12-22
- [x] ポリモーフィズム（オーバーライド、オーバーロード）★完了 2025-12-22
- [x] 抽象クラスとインターフェースの違い ★完了 2025-12-22
- [x] 簡単なクラス設計の練習 ★完了 2025-12-22

**1.0.3 Maven/Gradle基礎の詳細作業**
- [x] Mavenとは何か（ビルドツール、依存関係管理）★完了 2025-12-23
- [x] pom.xml の基本構造 ★完了 2025-12-23
- [x] 依存関係の追加方法 ★完了 2025-12-23
- [x] Mavenコマンド（mvn clean, mvn install, mvn package）★完了 2025-12-23
- [x] Gradleとの違い（選択する場合）★完了 2025-12-23

**1.0.4 簡単なJavaプログラム作成の詳細作業**
- [x] Hello World プログラム ★完了 2025-12-21
- [x] 計算機プログラム（クラスとメソッドを使用）★完了 2025-12-22
- [x] Todoリストプログラム（簡易版、コンソール出力）★完了 2025-12-25
- [x] Mavenプロジェクトとして作成 ★完了 2025-12-23
- [x] 動作確認 ★完了 2025-12-25

---

### 1.1 設計（2.7日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.1.1 | 画面設計 | 1.3日 | なし | ワイヤーフレーム、画面遷移図 | 5画面（ログイン、登録、一覧、作成/編集、カテゴリー） |
| 1.1.2 | データモデル設計 | 0.7日 | 1.1.1 | ER図、テーブル定義書 | 画面で必要なデータを元に設計 |
| 1.1.3 | API設計 | 0.7日 | 1.1.2 | APIエンドポイント一覧 | RESTful設計、リクエスト/レスポンス定義 |

**1.1.1 画面設計の詳細作業**
- [x] 要件の整理（どんな画面が必要か）★完了 2026-01-13
- [x] ログイン画面ワイヤーフレーム（メールアドレス、パスワード入力）★完了 2026-01-13
- [x] ユーザー登録画面ワイヤーフレーム（メール、パスワード、確認）★完了 2026-01-13
- [x] Todo一覧画面ワイヤーフレーム（フィルタ・ソートUI含む）★完了 2026-01-13
- [x] Todo作成/編集フォームワイヤーフレーム（タイトル、説明、期限日、優先度、カテゴリー）★完了 2026-01-13
- [x] カテゴリー管理画面ワイヤーフレーム（一覧、追加、編集、削除）★完了 2026-01-13
- [x] 画面遷移図作成（どの画面からどの画面へ遷移するか）★完了 2026-01-13
- [x] 必要なデータの洗い出し（各画面で何が表示されるか）★完了 2026-01-13

**1.1.2 データモデル設計の詳細作業**
- [x] 画面設計から必要なデータを抽出 ★完了 2026-01-13
- [x] User テーブル設計（id, email, password_hash, created_at, updated_at）★完了 2026-01-13
- [x] Category テーブル設計（id, user_id, name, color）★完了 2026-01-13
- [x] Todo テーブル設計（id, user_id, category_id, title, description, priority, due_date, is_completed, completed_at）★完了 2026-01-13
- [x] リレーション定義（外部キー制約：user_id, category_id）★完了 2026-01-13
- [x] インデックス設計（email, user_id, category_id）★完了 2026-01-13
- [x] ER図作成 ★完了 2026-01-13
- [x] 正規化の確認（第3正規形）★完了 2026-01-13

**1.1.3 API設計の詳細作業**
- [x] データモデルを元にエンドポイントを設計 ★完了 2026-01-13
- [x] 認証API定義（POST /api/auth/register, POST /api/auth/login）★完了 2026-01-13
- [x] Todo API定義（GET/POST /api/todos, GET/PUT/DELETE /api/todos/{id}, PATCH /api/todos/{id}/complete）★完了 2026-01-13
- [x] Category API定義（GET/POST /api/categories, PUT/DELETE /api/categories/{id}）★完了 2026-01-13
- [x] リクエストスキーマ定義（Pydantic）★完了 2026-01-13
- [x] レスポンススキーマ定義 ★完了 2026-01-13
- [x] エラーレスポンス定義（400, 401, 403, 404, 500）★完了 2026-01-13
- [x] クエリパラメータ設計（フィルタ、ソート用）★完了 2026-01-13

---

### 1.2 環境構築・Spring Boot学習（8.8日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.2.1 | Spring Boot基礎学習 | 4.5日 | 1.0.4 | Spring Boot理解 | 公式チュートリアル完了 |
| 1.2.2 | Spring Boot + PostgreSQL環境構築 | 4.0日 | 1.2.1 | 動作する開発環境 | Docker使用推奨 |
| 1.2.3 | Gitリポジトリ初期化 | 0.3日 | なし | Gitリポジトリ、.gitignore | GitHub/GitLabにプッシュ |

**1.2.1 Spring Boot基礎学習の詳細作業**
- [x] Spring Bootとは何か（フレームワークの概要）★完了 2026-01-16
- [x] Spring Initializr でプロジェクト作成 ★完了 2026-01-16
- [x] @SpringBootApplication の理解 ★完了 2026-01-16
- [x] REST APIの基礎（@RestController, @GetMapping等）★完了 2026-01-16
- [x] 依存性注入（DI）の概念（@Autowired, @Component）★完了 2026-01-16
- [x] レイヤードアーキテクチャ（Controller/Service/Repository）★完了 2026-01-16
- [x] アノテーションの理解（@Service, @Repository, @Entity等）★完了 2026-01-16
- [x] application.properties / application.yml の設定 ★完了 2026-01-18
- [ ] 公式のGetting Startedガイドを実施
- [x] 簡単なREST API（Hello World）を作成して動作確認 ★完了 2026-01-19
- [ ] Spring Bootの公式ドキュメントを読む

**1.2.2 Spring Boot + PostgreSQL環境構築の詳細作業**
- [x] Javaバージョン確認・インストール（Java 17） ★完了 2026-01-16
- [x] PostgreSQLインストール・起動確認（Docker使用）★完了 2026-01-18
  - Docker Composeで PostgreSQL 16 コンテナを起動
  - .envファイルで環境変数管理（パスワードをべた書きしない）
- [x] Spring Initializr でプロジェクト作成 ★完了 2026-01-16
  - Dependencies: Spring Web, Spring Data JPA, PostgreSQL Driver, Spring Security, Lombok, Validation
  - Java version: 17
  - Build tool: Gradle - Kotlin ★Mavenから変更
- [x] プロジェクトをIDEで開く ★完了 2026-01-16
- [x] Gradleプロジェクトのロード（IntelliJ IDEA）★完了 2026-01-18
- [x] Gradleロード完了確認・エラーチェック ★完了 2026-01-18
- [x] build.gradle.kts の内容確認 ★完了 2026-01-18
  - 環境変数をJavaプロセスに渡す設定を追加
- [x] application.properties設定 ★完了 2026-01-18
  - データベース接続情報（URL, username, password）
  - JPA設定（ddl-auto, show-sql等）
  - 環境変数からパスワードを読み込む設定
- [x] データベース作成（Docker Compose）★完了 2026-01-18
- [ ] 接続テスト（簡単なEntityとRepositoryを作成）
- [x] Spring Bootアプリケーション起動確認 ★完了 2026-01-18
  - HikariPool接続成功、PostgreSQL 16.10に接続
- [x] Hello World エンドポイント作成・動作確認 ★完了 2026-01-19
  - HelloController.java 作成（@RestController, @GetMapping）
  - SecurityConfig.java 作成（/api/hello を認証なしで許可）

**1.2.2 トラブルシューティング記録（2026-01-18）**
- Windows改行コード（CRLF）問題: .envとdocker-compose.ymlに含まれていた`\r`が認証エラーの原因
  - 解決: `sed -i 's/\r$//' ファイル名` または WSL2上でファイルを作り直す
- シェル環境変数の残留: 古い環境変数がシェルに残っていた
  - 解決: `unset` で環境変数をクリアしてから再読み込み
- Gradle環境変数問題: GradleがJavaプロセスに環境変数を渡さない
  - 解決: build.gradle.ktsに `environment(System.getenv())` を追加

**1.2.3 Gitリポジトリ初期化の詳細作業**
- [x] `git init` ★完了（既存リポジトリに統合予定）
- [x] .gitignore作成（Java, build/, .gradle/, .idea/ など）★完了 2026-01-16（Spring Initializrが生成）
- [ ] README.mdの初版作成
- [ ] 初回コミット（todoappプロジェクトを追加）
- [x] GitHubにリポジトリ作成 ★完了（既存）
- [ ] リモートリポジトリにプッシュ

---

### 1.3 バックエンド: 認証機能（30.6日）★最も難しい部分

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.3.1 | JPA/Hibernate基礎学習 | 3.0日 | 1.2.2 | ORM理解 | Entity, Repository, JPQL |
| 1.3.2 | Userエンティティ作成 | 6.0日 | 1.3.1 | model/User.java | JPA Entity（学習含む） |
| 1.3.3 | Spring Security基礎学習 | 3.0日 | 1.3.2 | セキュリティ理解 | 認証・認可の仕組み |
| 1.3.4 | ユーザー登録API | 4.1日 | 1.3.3 | /api/auth/register | メール重複チェック |
| 1.3.5 | パスワードハッシュ化実装 | 1.2日 | 1.3.4 | Spring Security設定 | BCryptPasswordEncoder |
| 1.3.6 | JWT基礎学習 | 2.3日 | 1.3.5 | JWT理解 | jjwtライブラリ |
| 1.3.7 | ログインAPI（JWT発行） | 7.0日 | 1.3.6 | /api/auth/login | JWT実装★ |
| 1.3.8 | JWT認証フィルター | 4.0日 | 1.3.7 | JwtAuthenticationFilter.java | 全APIで認証チェック |

**1.3.1 JPA/Hibernate基礎学習の詳細作業**
- [x] ORMとは何か（オブジェクト関係マッピング）★完了 2026-01-20
- [x] JPAとHibernateの関係 ★完了 2026-01-20
- [x] Entityの概念（@Entity, @Table）★完了 2026-01-20
- [x] 主キー（@Id, @GeneratedValue）★完了 2026-01-20
- [x] フィールドマッピング（@Column）★完了 2026-01-20
- [ ] リレーション（@ManyToOne, @OneToMany）← Todo/Category作成時に学習
- [x] Repositoryインターフェース（JpaRepository）★完了 2026-01-20
- [x] 基本的なCRUD操作 ★完了 2026-01-21
- [ ] JPQL（Java Persistence Query Language）の基礎 ← 必要に応じて学習
- [ ] 公式ドキュメント、チュートリアルを読む

**1.3.2 Userエンティティ作成の詳細作業**
- [x] JPAエンティティ定義（User class）★完了 2026-01-20
- [x] フィールド定義（id, email, passwordHash, createdAt, updatedAt）★完了 2026-01-20
- [x] アノテーション設定（@Entity, @Table, @Column, @Id, @GeneratedValue）★完了 2026-01-20
- [x] ユニーク制約（email）★完了 2026-01-20
- [x] UserRepositoryインターフェース作成（JpaRepositoryを継承）★完了 2026-01-20
- [x] テーブル作成確認（PostgreSQLで確認）★完了 2026-01-20

**1.3.3 Spring Security基礎学習の詳細作業**
- [x] Spring Securityとは何か ★完了 2026-01-20
- [x] 認証（Authentication）と認可（Authorization）の違い ★完了 2026-01-20
- [x] SecurityFilterChainの概念 ★完了 2026-01-21
- [ ] UserDetailsとUserDetailsServiceの役割 ← ログインAPI実装時に学習
- [x] PasswordEncoderの使い方 ★完了 2026-01-20
- [ ] 公式ドキュメント、ガイドを読む
- [x] 簡単な認証の例を動かす ★完了 2026-01-21

**1.3.4 ユーザー登録APIの詳細作業**
- [x] DTOクラス定義（SignupRequest: email, password）★完了 2026-01-20
- [x] DTOクラス定義（UserResponse: id, email, createdAt）★完了 2026-01-20
- [x] バリデーション実装（@Valid, @Email, @NotBlank等）★完了 2026-01-21
- [x] メール重複チェック ★完了 2026-01-21
- [x] データベース保存処理（UserService経由）★完了 2026-01-21
- [ ] エラーハンドリング（重複メール、バリデーションエラー）← 後で対応
- [x] curlでテスト ★完了 2026-01-21

**1.3.5 パスワードハッシュ化実装の詳細作業**
- [x] Spring Security設定クラス作成 ★完了 2026-01-20
- [x] BCryptPasswordEncoderをBean登録 ★完了 2026-01-20
- [x] パスワードエンコード処理実装 ★完了 2026-01-21
- [ ] パスワード検証処理実装 ← ログインAPI実装時
- [x] ユーザー登録APIに統合 ★完了 2026-01-21
- [x] テスト（パスワードが平文で保存されないことを確認）★完了 2026-01-21

**セキュリティ学習メモ（2026-01-21）**
- レインボーテーブル攻撃: よくあるパスワードのハッシュ値一覧表を使った攻撃
- ソルト: パスワードに追加するランダム文字列（レインボーテーブル対策）
- BCryptはソルトを自動生成・保存してくれる（開発者が意識する必要なし）

**1.3.6 JWT基礎学習の詳細作業**
- [x] JWTとは何か（JSON Web Token）★完了 2026-01-21
- [x] JWTの構造（Header, Payload, Signature）★完了 2026-01-21
- [ ] アクセストークンとリフレッシュトークン
- [x] jjwt（Java JWT）ライブラリの追加（build.gradle.kts）★完了 2026-01-21
- [x] jjwtの基本的な使い方（トークン生成、検証）★完了 2026-01-22
  - JwtUtilクラス作成（generateToken, validateToken, getEmailFromToken）
  - @Valueアノテーションで設定値読み込み
- [ ] 公式ドキュメント、サンプルコードを読む

**1.3.7 ログインAPI（JWT発行）の詳細作業 ★最重要**
- [x] リクエストDTO定義（LoginRequest: email, password）★完了 2026-01-22
- [x] レスポンスDTO定義（LoginResponse: accessToken, tokenType）★完了 2026-01-22
- [x] AuthControllerクラス作成 ★完了 2026-01-21
- [x] UserServiceにloginメソッド追加 ★完了 2026-01-25
- [x] パスワード照合（PasswordEncoder.matches）★完了 2026-01-25
- [x] JwtUtilクラス作成（トークン生成・検証ロジック）★完了 2026-01-22
- [x] シークレットキー設定（application.properties）★完了 2026-01-22
- [x] トークン有効期限設定（24時間）★完了 2026-01-22
- [x] JWTトークン生成処理 ★完了 2026-01-25
- [ ] エラーハンドリング（認証失敗、バリデーションエラー）← 後で対応
- [x] curlでテスト（トークン発行確認）★完了 2026-01-25

**1.3.8 JWT認証フィルターの詳細作業**
- [x] JwtAuthenticationFilter作成（OncePerRequestFilterを継承）★完了 2026-01-25
- [x] Authorizationヘッダーからトークン取得 ★完了 2026-01-25
- [x] トークンデコード・検証（JwtUtil使用）★完了 2026-01-25
- [x] SecurityContextに認証情報設定 ★完了 2026-01-25
- [ ] エラーハンドリング（トークン無効、期限切れ）← 後で対応
- [x] 保護されたエンドポイントでテスト ★完了 2026-01-25

---

### 1.4 バックエンド: Todo機能（11.5日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.4.1 | Todoエンティティ作成 | 2.7日 | 1.1.1, 1.3.2 | model/Todo.java | User, Categoryとのリレーション |
| 1.4.2 | Todo作成API | 2.3日 | 1.4.1, 1.3.8 | POST /api/todos | JWT認証必須 |
| 1.4.3 | Todo検索API | 2.3日 | 1.4.1, 1.3.8 | POST /api/todos/search | フィルタ・ソート対応 |
| 1.4.4 | Todo更新API | 1.6日 | 1.4.1, 1.3.8 | PATCH /api/todos/{id} | 部分更新、完了切り替え含む |
| 1.4.5 | Todo削除API | 0.9日 | 1.4.1, 1.3.8 | DELETE /api/todos/{id} | 論理削除、所有権チェック |

**1.4.1 Todoエンティティ作成の詳細作業**
- [x] JPAエンティティ定義（Todo class）★完了 2026-01-26
- [x] フィールド定義（id, userId, categoryId, title, description, priority, due, isCompleted, deletedAt）★完了 2026-01-26
- [x] アノテーション設定（@Entity, @ManyToOne等）★完了 2026-01-26
- [x] 外部キー制約（@JoinColumn: userId, categoryId）★完了 2026-01-26
- [x] TodoRepositoryインターフェース作成 ★完了 2026-01-26
- [x] テーブル作成確認（PostgreSQLで構造確認）★完了 2026-01-26

**1.4.2 Todo作成APIの詳細作業**
- [x] リクエストスキーマ（TodoRequest: title, description, priority, due, category_id, is_completed）★完了 2026-01-29
- [x] 認証チェック（current_userを取得）★完了 2026-01-30
- [x] データベース保存（user_idは認証ユーザー）★完了 2026-01-30
- [x] レスポンススキーマ（TodoResponse: 作成されたTodo情報）★完了 2026-01-29
- [x] バリデーション（title必須、priorityの値チェック）★完了 2026-01-30
- [x] curlでテスト ★完了 2026-01-30

**1.4.3 Todo検索APIの詳細作業（POST /api/todos/search）★難しい**
- [x] 認証チェック ★完了 2026-02-01
- [x] 自分のTodoのみ取得（WHERE user_id = current_user.id）★完了 2026-02-01
- [x] リクエストスキーマ（TodoSearchRequest: status, category_id, priority, sort, order）★完了 2026-02-01
- [x] レスポンススキーマ（Todoのリスト）★完了 2026-02-01
- [x] Spring Data JPA Specificationの学習 ★完了 2026-02-01
- [x] TodoSpecificationクラス作成 ★完了 2026-02-01
- [x] status フィルタ実装（completed, incomplete, all）★完了 2026-02-01
- [x] category_id フィルタ実装 ★完了 2026-02-01
- [x] priority フィルタ実装（配列対応）★完了 2026-02-01
- [x] Specificationの組み合わせ（and条件）★完了 2026-02-01
- [x] ソート機能実装（Sort.by を使用）★完了 2026-02-01
- [x] curlでテスト ★完了 2026-02-01

**1.4.4 Todo更新APIの詳細作業（PUT /api/todos/{id}）**
- [x] 認証チェック ★完了 2026-01-30
- [x] Todoの存在チェック ★完了 2026-01-30
- [x] 所有権チェック（todo.user_id == current_user.id）★完了 2026-01-30
- [x] リクエストスキーマ（TodoRequest使用）★完了 2026-01-30
- [ ] 部分更新ロジック（指定されたフィールドのみ更新）← PATCHに変更時に対応
- [ ] category_idのnull許可（カテゴリ解除）← 後で対応
- [x] データベース更新 ★完了 2026-01-30
- [x] レスポンス（更新後のTodo）★完了 2026-01-30
- [x] curlでテスト ★完了 2026-01-30

**1.4.5 Todo削除APIの詳細作業**
- [x] 認証チェック ★完了 2026-01-30
- [x] Todoの存在チェック ★完了 2026-01-30
- [x] 所有権チェック ★完了 2026-01-30
- [x] 論理削除（deleted_atに現在時刻を設定）★完了 2026-01-30
- [x] レスポンス（204 No Content）★完了 2026-01-30
- [ ] 冪等性確認（削除済みでも204を返す）← 後で対応
- [x] curlでテスト ★完了 2026-01-30

---

### 1.5 バックエンド: Category機能（5.0日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.5.1 | Categoryエンティティ作成 | 1.3日 | 1.1.1, 1.3.2 | model/Category.java | Userとのリレーション |
| 1.5.2 | Category CRUD API | 3.4日 | 1.5.1, 1.3.8 | /api/categories | 作成・一覧・更新・削除 |
| 1.5.3 | TodoとCategoryの関連付け | 1.4日 | 1.4.1, 1.5.1 | リレーション確認 | Join取得のテスト |

**1.5.1 Categoryエンティティ作成の詳細作業**
- [x] JPAエンティティ定義（Category class）★完了 2026-01-26
- [x] フィールド定義（id, userId, name, color, deletedAt）★完了 2026-01-26
- [x] アノテーション設定（@Entity, @ManyToOne等）★完了 2026-01-26
- [x] 外部キー制約（@JoinColumn: userId）★完了 2026-01-26
- [x] CategoryRepositoryインターフェース作成 ★完了 2026-01-26
- [x] テーブル作成確認（PostgreSQLで構造確認）★完了 2026-01-26

**1.5.2 Category CRUD APIの詳細作業**
- [x] CategoryRepositoryにexistsByUserAndNameメソッド追加 ★完了 2026-01-27
- [x] CategoryService作成（create, findByUserメソッド完成）★完了 2026-01-27
- [x] CategoryService完成（findById, update, deleteメソッド修正）★完了 2026-01-27
- [x] リクエスト・レスポンススキーマ（CategoryRequest, CategoryResponse）★完了 2026-01-27
- [x] UserServiceにfindByEmailメソッド追加 ★完了 2026-01-27
- [x] CategoryController作成 ★完了 2026-01-27
- [x] POST /api/categories（作成）★完了 2026-01-27
- [x] GET /api/categories（一覧取得、自分のもののみ）★完了 2026-01-27
- [x] PUT /api/categories/{id}（更新）★完了 2026-01-27
- [x] DELETE /api/categories/{id}（削除）★完了 2026-01-27
- [x] curlでテスト ★完了 2026-01-29

**1.5.3 TodoとCategoryの関連付けの詳細作業**
- [x] Todo取得時にCategoryも含める（JOIN）★完了 2026-02-01
- [x] レスポンスにcategory情報を追加 ★完了 2026-02-01
- [ ] Categoryが削除されたときのTodoの扱い（NULLにするか、削除を防ぐか）← 後で対応
- [x] テスト ★完了 2026-02-01
- [x] N+1問題対策（@EntityGraph使用）★完了 2026-02-01

---

### 1.6 フロントエンド（9.5日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.6.1 | ログイン画面 | 1.3日 | 1.3.4 | login.html, login.js, login.css | JWT保存（localStorage） |
| 1.6.2 | ユーザー登録画面 | 1.0日 | 1.3.2 | register.html, register.js | バリデーション |
| 1.6.3 | Todo一覧画面 | 2.3日 | 1.4.3 | index.html, app.js, app.css | フィルタ・ソートUI含む |
| 1.6.4 | Todo作成・編集フォーム | 1.8日 | 1.4.2, 1.4.4 | モーダルまたは専用ページ | 日付ピッカー |
| 1.6.5 | カテゴリー管理画面 | 1.0日 | 1.5.2 | category.html, category.js | CRUD操作 |
| 1.6.6 | API連携（fetch処理） | 1.3日 | 全バックエンド | api.js | 共通処理（認証ヘッダー） |
| 1.6.7 | レスポンシブ対応 | 0.7日 | 全画面 | CSSメディアクエリ | スマホ・タブレット対応 |

**1.6.1 ログイン画面の詳細作業**
- [x] HTML作成（メールアドレス、パスワード入力フォーム）★完了 2026-02-02
- [x] CSS作成（シンプルで使いやすいデザイン）★完了 2026-02-12
- [x] JavaScript実装（フォーム送信処理）★完了 2026-02-03
- [x] /api/auth/login への fetch リクエスト ★完了 2026-02-02
- [x] JWTトークンをlocalStorageに保存 ★完了 2026-02-03
- [x] ログイン成功後、Todo一覧画面へリダイレクト ★完了 2026-02-03
- [x] エラーハンドリング（認証失敗時のメッセージ表示）★完了 2026-02-03
- [x] 動作確認 ★完了 2026-02-03

**1.6.2 ユーザー登録画面の詳細作業**
- [x] HTML作成（メールアドレス、パスワード、パスワード確認）★完了 2026-02-03
- [x] CSS作成 ★完了 2026-02-12
- [x] JavaScript実装（フォーム送信処理）★完了 2026-02-03
- [x] バリデーション（パスワード一致チェック、メール形式）★完了 2026-02-03
- [x] /api/auth/register への fetch リクエスト ★完了 2026-02-03
- [x] 登録成功後、ログイン画面へリダイレクト ★完了 2026-02-03
- [x] エラーハンドリング（メール重複など）★完了 2026-02-03
- [x] 動作確認 ★完了 2026-02-03

**1.6.3 Todo一覧画面の詳細作業**
- [x] HTML作成（ヘッダー、Todoリスト、フィルタ・ソートUI）★完了 2026-02-03
- [x] CSS作成（リスト形式）★完了 2026-02-12
- [x] JavaScript実装（Todo一覧取得、表示）★完了 2026-02-03
- [x] /api/todos/search への fetch リクエスト ★完了 2026-02-03
- [x] 認証チェック（JWTがない場合、ログイン画面へ）★完了 2026-02-03
- [x] Todoの表示（タイトル、期限日、優先度、カテゴリー）★完了 2026-02-03
- [ ] フィルタUI（完了/未完了、カテゴリー、優先度）
- [ ] ソートUI（期限日、作成日）
- [x] 完了チェックボックスのイベント（PATCH /api/todos/{id}）★完了 2026-02-05
- [x] 削除ボタン（確認ダイアログ → /api/todos/{id} DELETE）★完了 2026-02-03
- [x] 動作確認 ★完了 2026-02-05

**1.6.4 Todo作成・編集フォームの詳細作業**
- [x] HTML作成（index.html内にフォーム配置）★完了 2026-02-05
- [x] フォーム項目（タイトル、説明、期限日、優先度、カテゴリー）★完了 2026-02-05
- [x] CSS作成 ★完了 2026-02-12
- [x] JavaScript実装（作成モード・編集モード）★完了 2026-02-09
- [x] 日付ピッカー（HTML5のdate input）★完了 2026-02-05
- [x] カテゴリー選択（ドロップダウン、/api/categoriesから取得）★完了 2026-02-05
- [x] 優先度選択（1〜5の整数、HTMLベタ打ち）★完了 2026-02-05
- [x] 作成時: POST /api/todos ★完了 2026-02-05
- [x] 編集時: PATCH /api/todos/{id} ★完了 2026-02-09
- [x] バリデーション（タイトル必須、HTMLのrequired属性）★完了 2026-02-09
- [x] 保存成功後、一覧画面を更新（window.location.reload）★完了 2026-02-05
- [x] 動作確認 ★完了 2026-02-09

**1.6.5 カテゴリー管理画面の詳細作業**
- [x] HTML作成（カテゴリー一覧、追加フォーム）★完了 2026-02-09
- [x] CSS作成 ★完了 2026-02-12
- [x] JavaScript実装 ★完了 2026-02-09
- [x] カテゴリー一覧表示（GET /api/categories）★完了 2026-02-09
- [x] カテゴリー追加フォーム（POST /api/categories）★完了 2026-02-09
- [x] カテゴリー編集（PUT /api/categories/{id}）★完了 2026-02-09
- [x] カテゴリー削除（DELETE /api/categories/{id}、確認ダイアログ）★完了 2026-02-09
- [x] 論理削除済みカテゴリーの非表示対応（CategoryRepository修正）★完了 2026-02-09
- [ ] 色選択（カラーピッカー）
- [x] 動作確認 ★完了 2026-02-09

**1.6.6 API連携（fetch処理）の詳細作業**
- [x] api.js 作成（共通fetch関数: fetchWithAuth, getAuthToken）★完了 2026-02-12
- [x] 認証ヘッダー自動付与（Authorization: Bearer {token}）★完了 2026-02-12
- [x] エラーハンドリング（401 Unauthorized → ログイン画面へ）★完了 2026-02-12
- [x] 204 No Content対応（response.json()を呼ばない）★完了 2026-02-12
- [ ] 共通のエラー表示処理
- [x] app.js で api.js を使用するよう修正 ★完了 2026-02-12
- [x] category.js で api.js を使用するよう修正 ★完了 2026-02-12
- [x] 動作確認（Todo CRUD、カテゴリー CRUD）★完了 2026-02-12

**1.6.7 レスポンシブ対応の詳細作業**
- [x] メディアクエリ設定（スマホ: 〜768px）★完了 2026-02-12
- [x] スマホ表示の調整（フォントサイズ、余白、ボタンサイズ）★完了 2026-02-12
- [x] テーブル横スクロール対応（table-wrapper + overflow-x: auto）★完了 2026-02-12
- [x] 各画面で動作確認（Chrome DevToolsのデバイスモード）★完了 2026-02-12

---

### 1.7 テスト・デバッグ（9.6日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.7.1 | 統合テスト（手動） | 3.6日 | 全機能 | テストチェックリスト | ユーザーシナリオベース |
| 1.7.2 | バグ修正バッファ | 6.0日 | 1.7.1 | バグ修正コミット | Java初心者のため多め★ |

**1.7.1 統合テスト（手動）の詳細作業**
- [x] テストシナリオ作成 ★完了 2026-02-12
  - ユーザー登録 → ログイン → Todo作成 → 編集 → 完了 → 削除
  - カテゴリー作成 → Todoにカテゴリー設定 → フィルタリング
  - ログアウト → 再ログイン
- [x] 各シナリオを実行 ★完了 2026-02-12
- [x] 正常系のテスト ★完了 2026-02-12
- [x] 異常系のテスト（無効なデータ、認証エラーなど）★完了 2026-02-12
- [ ] エッジケースのテスト（空文字、非常に長い文字列など）
- [ ] ブラウザ互換性テスト（Chrome, Firefox, Safari）
- [ ] スマホ・タブレットでの動作確認
- [x] 発見したバグをリスト化 ★完了 2026-02-12（5件発見）

**1.7.2 バグ修正バッファの詳細作業（Java初心者向け）**
- [x] 発見したバグを優先順位付け ★完了 2026-02-12
- [x] 重大なバグから修正 ★完了 2026-02-13（全5件修正）
  - #1 完了チェックで詳細と期限が消える → TodoService.updateでnullフィールド上書き防止（2026-02-12）
  - #2 削除したカテゴリがTodo一覧に表示される → CategoryService.deleteで該当Todoのcategoryをnullに（2026-02-13）
  - #3 index.htmlにカテゴリー管理画面へのリンクが無い → リンク追加（2026-02-13）
  - #4 index.htmlにログアウトボタンが無い → ボタン追加、JS処理追加（2026-02-13）
  - #5 カテゴリー管理画面でカラーパレットが見えない → input type="color"に変更、CSS調整（2026-02-13）
- [x] 修正後、再テスト ★完了 2026-02-13
- [x] リグレッションテスト（他の機能が壊れていないか）★完了 2026-02-13

---

### 1.8 ドキュメント（1.0日）

| ID | タスク名 | 見積もり | 依存関係 | 成果物 | 備考 |
|----|---------|---------|---------|--------|------|
| 1.8.1 | README作成 | 0.7日 | 全機能 | README.md | セットアップ手順、使い方 |
| 1.8.2 | API仕様書確認 | 0.3日 | 全API | FastAPI自動生成ドキュメント | /docs で確認 |

**1.8.1 README作成の詳細作業**
- [x] プロジェクト概要 ★完了 2026-02-13
- [x] 機能一覧 ★完了 2026-02-13
- [x] 技術スタック ★完了 2026-02-13
- [x] セットアップ手順（環境構築、データベース作成、起動方法）★完了 2026-02-13
- [x] 使い方 ★完了 2026-02-13
- [ ] 今後の予定（Phase 2, 3）
- [ ] ライセンス

**1.8.2 API仕様書確認の詳細作業**
- [ ] Swagger UI（springdoc-openapi）の確認
- [ ] 全エンドポイントが記載されているか
- [ ] リクエスト・レスポンスのサンプルが正しいか
- [ ] 必要に応じて修正

---

## タスク依存関係図

```
[1.1.1 画面設計] → [1.1.2 データモデル設計] → [1.1.3 API設計]
                                                    ↓
                        [1.2.1 環境構築] ──────────→ [1.3.1 Userモデル] → [1.3.2 登録API] → [1.3.3 パスワード] → [1.3.4 ログインAPI] → [1.3.5 JWT認証]
                                                    ↓                                                                                      ↓
                                          [1.4.1 Todoモデル] → [1.4.2〜1.4.7 Todo API] ────────────────────────────────────→ [1.6 フロントエンド]
                                                    ↓                                                                                      ↓
                                    [1.5.1 Categoryモデル] → [1.5.2 Category API] → [1.5.3 関連付け] ──────────────────→ [1.7 テスト]
                                                                                                                                           ↓
[1.2.2 Git初期化] ──────────────────────────────────────────────────────────────────────────────────────────────────────────→ [1.8 ドキュメント]
```

**設計の流れ（重要）**:
```
画面設計（何を表示するか）
  ↓
データモデル設計（どう保存するか）
  ↓
API設計（どうやり取りするか）
  ↓
実装
```

**クリティカルパス（最長経路）**:
```
1.1.1（画面設計） → 1.1.2（データモデル） → 1.1.3（API設計） → 1.2.1（環境構築） → 1.3.1 → 1.3.2 → 1.3.3 → 1.3.4 → 1.3.5 → 1.4.1 → 1.4.2〜1.4.7 → 1.6.1〜1.6.7 → 1.7.1 → 1.7.2 → 1.8.1
```

---

## 見積もりサマリー（Java初心者版）

| 大項目 | 小計（日） | 割合 |
|--------|-----------|------|
| 1.0 Java基礎学習 | 12.0 | 14.7% |
| 1.1 設計 | 2.7 | 3.3% |
| 1.2 環境構築・Spring Boot学習 | 8.8 | 10.8% |
| 1.3 認証機能 | 30.6 | 37.4% |
| 1.4 Todo機能 | 11.5 | 14.1% |
| 1.5 Category機能 | 5.0 | 6.1% |
| 1.6 フロントエンド | 9.5 | 11.6% |
| 1.7 テスト・デバッグ | 9.6 | 11.7% |
| 1.8 ドキュメント | 1.0 | 1.2% |
| **合計** | **81.8日** | **100%** |

**学習時間の内訳**:
- Java基礎学習: 12.0日（14.7%）
- Spring Boot学習: 4.5日（5.5%）
- JPA/Hibernate学習: 3.0日（3.7%）
- Spring Security学習: 3.0日（3.7%）
- JWT学習: 2.3日（2.8%）
- **学習合計: 24.8日（30.3%）** ← 全体の約3割が学習

**カレンダー換算（Java初心者版）**:
- 1日 = 8時間
- 合計時間: 81.8日 × 8時間 = 654.4時間
- 週の実質作業時間: 12.6時間（平日2h×5日 + 休日4h×2日 × 70%）
- 完了までの週数: 654.4 ÷ 12.6 = 51.9週 ≒ **52週（約1年）**

**開始**: 2025年12月14日
**完了予定**: 2026年12月中旬

**重要**: Java初心者の場合、Phase 1だけで約1年かかります。
これは、Java言語とSpring Bootエコシステム全体の学習に多くの時間を要するためです。

---

## 週次計画（目安）- Java初心者版

| 週 | 主なタスク | マイルストーン |
|----|-----------|--------------|
| Week 1-6 | Java基礎学習（文法、オブジェクト指向、Maven） | Java基礎習得★ |
| Week 7-10 | Spring Boot基礎学習、環境構築 | 開発環境完成 |
| Week 11-12 | 設計（画面、データモデル、API）、Git初期化 | 設計完了 |
| Week 13-15 | JPA/Hibernate学習、Userエンティティ作成 | ORM習得 |
| Week 16-18 | Spring Security学習、ユーザー登録API、パスワードハッシュ化 | ユーザー登録完成 |
| Week 19-22 | JWT学習、ログインAPI実装 | JWT認証実装★ |
| Week 23-26 | JWT認証フィルター実装 | 認証機能完成★★ |
| Week 27-30 | Todoエンティティ、Todo CRUD API実装 | Todo基本機能完成 |
| Week 31-34 | フィルタリング機能（Specification学習含む） | Todo検索機能完成 |
| Week 35-38 | Categoryエンティティ、Category CRUD API | バックエンド完成 |
| Week 39-42 | フロントエンド実装（ログイン、登録、Todo一覧、作成・編集） | フロントエンド完成 |
| Week 43-45 | カテゴリー管理画面、API連携、レスポンシブ対応 | UI完成 |
| Week 46-48 | 統合テスト、バグ修正 | テスト期間 |
| Week 49-51 | バグ修正バッファ（Java初心者は多めに確保） | デバッグ期間★ |
| Week 52 | ドキュメント作成、最終確認 | Phase 1完成🎉 |

**重要ポイント**:
- Week 1-6: Java基礎をしっかり固めることが最重要
- Week 13-26: 認証機能が最大の山場（約14週間）
- Week 49-51: バグ修正に十分な時間を確保

---

## 進捗管理

各タスクの進捗を以下の形式で記録します：

```
[ ] 未着手
[進行中] 作業中
[✓] 完了
[保留] 一時保留
```

### 進捗記録テンプレート

```markdown
## Week 1 (2025-12-14〜2025-12-20)

### 完了したタスク
- [✓] 1.1.1 画面設計
- [✓] 1.1.2 データモデル設計

### 進行中のタスク
- [進行中] 1.1.3 API設計（60%完了）

### 次週の予定
- 1.1.3 API設計（完了）
- 1.2.1 環境構築
- 1.2.2 Git初期化

### 問題・課題
- なし

### 学んだこと
- ワイヤーフレームの書き方を学んだ
- 画面設計からデータモデルへの落とし込み方を理解した
- ER図の書き方を復習した
```

---

## リスク管理（Java初心者版）

| リスク | 発生確率 | 影響度 | 対策 |
|--------|---------|-------|------|
| Java学習に予想以上に時間がかかる | 高 | 最高 | 既に12日確保、さらにバッファあり。焦らず基礎を固める |
| Spring Boot学習の難易度が高い | 高 | 高 | 公式チュートリアル完了を必須とする。4.5日確保 |
| JPA/Hibernateでつまずく | 高 | 高 | 3日の学習期間確保。簡単な例から始める |
| Spring Security + JWTが理解できない | 最高 | 最高 | 認証機能に30.6日確保（全体の37%）。段階的に学習 |
| NullPointerExceptionなどJava特有のエラー | 高 | 中 | バグ修正バッファを6日に増量。デバッグスキルの習得 |
| PostgreSQL環境構築で躓く | 中 | 中 | Docker使用で環境を標準化 |
| 本業が忙しく時間が取れない | 中 | 高 | 週12時間は控えめな見積もり。1年計画で余裕を持つ |
| モチベーション低下・挫折 | 高 | 最高 | 小さな成功体験を積む。Java基礎→簡単なAPI→認証と段階的に |
| スコープクリープ（機能追加の誘惑） | 高 | 中 | Phase 1のスコープを厳守、追加はPhase 2へ |

---

## 成功基準（Java初心者版）

Phase 1完成の判断基準：

**技術習得面**:
- [ ] Javaの基本文法を理解し、使いこなせる
- [ ] オブジェクト指向の概念を理解している
- [ ] Spring Bootの基本構造を理解している
- [ ] JPA/Hibernateでデータベース操作ができる
- [ ] Spring Securityで認証を実装できる

**機能面**:
- [ ] ユーザー登録・ログインができる
- [ ] JWTで認証が動作する
- [ ] Todoの作成・編集・削除・完了ができる
- [ ] カテゴリー分類ができる
- [ ] フィルタリング・ソート機能が動作する
- [ ] スマホでも使える（レスポンシブ）
- [ ] 自分が1週間継続して使える
- [ ] 致命的なバグがない
- [ ] READMEが整備されている

**学習成果**:
- [ ] Java/Spring Bootで簡単なWebアプリが作れる自信がついた
- [ ] エラーメッセージを読んでデバッグできる
- [ ] 公式ドキュメントを読んで理解できる

---

## 次のステップ

Phase 1完了後：

1. **振り返り（レトロスペクティブ）**
   - Keep / Problem / Try
   - 見積もり精度の検証
   - Phase 2への改善点

2. **Phase 2の計画**
   - 時間トラッキング機能
   - 可視化機能
   - 詳細見積もり

3. **フィードバック収集**
   - 友人に使ってもらう
   - 改善点の洗い出し

---

**作成日**: 2025-12-14
**最終更新**: 2026-02-13
**バージョン**: 1.8
