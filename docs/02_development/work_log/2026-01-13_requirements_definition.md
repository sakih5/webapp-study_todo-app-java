# 作業ログ: 2026-01-13 (要件定義編)

## 学習情報

- **日付**: 2026-01-13
- **学習フェーズ**: WBS 1.1 設計フェーズ - 要件定義
- **学習時間**: 約1時間
- **ステータス**: 要件定義書（REQUIREMENTS.md）完成

---

## 完了したタスク

### 作成したドキュメント

- **ファイル名**: `docs/01_specs/REQUIREMENTS.md`
- **目的**: Todoアプリケーションの全体要件を定義

---

## 要件定義の概要

### プロジェクトの目的

**時間管理と振り返りを重視したマルチユーザー対応のTodoアプリケーション**

単なるタスク管理ツールではなく、時間の使い方を可視化し、振り返りを通じて生産性を向上させることを目指す。

### 技術スタック

**フロントエンド:**
- HTML, JavaScript (Vanilla JS)
- CSS

**バックエンド:**
- Spring Boot (Java)
- JWT認証 (Spring Security)
- Bean Validation (Hibernate Validator)

**データベース:**
- PostgreSQL
- JPA / Hibernate

**その他:**
- RESTful API
- JSON形式

---

## 段階的開発計画（Phase分け）

### Phase 1: MVP (Minimum Viable Product)

**目標**: 基本的なTodo管理とユーザー認証

**機能:**
1. ユーザー認証
   - ユーザー登録
   - ログイン/ログアウト
   - JWTトークンによる認証
   - パスワードのハッシュ化

2. 基本的なTodo管理
   - Todo作成（タイトル、説明、期限日、優先度、カテゴリー）
   - Todo一覧表示
   - Todo詳細表示
   - Todo編集
   - Todo削除
   - Todo完了/未完了の切り替え

3. 基本UI
   - ログイン画面
   - ユーザー登録画面
   - Todoリスト画面
   - Todo作成/編集フォーム
   - レスポンシブデザイン（基本）

### Phase 2: 時間管理機能

**機能:**
1. 時間トラッキング
   - 予定時間の設定
   - 実績時間の手動入力
   - 予定時間と実績時間の比較表示

2. フィルタリング・検索・ソート
   - 完了/未完了、カテゴリー別、優先度別フィルタ
   - 期限日、優先度、作成日順でソート
   - タスク名・説明文での検索

3. 基本的な可視化
   - 日別の時間分布
   - カテゴリー別集計

### Phase 3: 高度な機能

**機能:**
1. サブタスク
2. タグ機能
3. 繰り返しタスク
4. 通知機能
5. 高度な可視化・振り返り機能
   - 24時間積み上げ棒グラフ
   - 週/月単位の統計
   - タスク完了率
   - 振り返りダッシュボード

---

## データモデル設計（概要）

### Phase 1で必要なテーブル

1. **User（ユーザー）**
   - id (UUID)
   - email (Unique)
   - password_hash
   - deleted_at

2. **Category（カテゴリー）**
   - id (UUID)
   - user_id (Foreign Key)
   - name
   - color (HEX色コード)
   - deleted_at

3. **Todo（タスク）**
   - id (UUID)
   - user_id (Foreign Key)
   - category_id (Foreign Key, Nullable)
   - title
   - description
   - priority (INT 1-5)
   - due_date
   - is_completed
   - deleted_at

### Phase 2以降で追加するテーブル

4. **TimeEntry（時間記録）**
5. **Tag（タグ）**
6. **TodoTag（多対多の中間テーブル）**

---

## API設計の概要

### 認証API
- POST /api/auth/register
- POST /api/auth/login
- POST /api/auth/logout
- GET /api/auth/me

### Todo API
- POST /api/todos/search
- POST /api/todos
- PATCH /api/todos/{id}
- DELETE /api/todos/{id}

### Category API
- GET /api/categories
- POST /api/categories
- PATCH /api/categories/{id}
- DELETE /api/categories/{id}

---

## UI/UX要件

### 基本レイアウト
- ヘッダー（ロゴ、ユーザー情報、ログアウトボタン）
- サイドバー（Todo一覧、カテゴリー管理、統計・振り返り）
- メインコンテンツエリア

### Todo一覧画面
- カードまたはリスト形式
- 各Todoの情報（タスク名、期限日、優先度、カテゴリー、完了チェックボックス）
- フィルター・ソート・検索バー
- 「新規Todo作成」ボタン

### Todo作成/編集画面
- モーダルまたは専用ページ
- フォーム項目（タスク名、説明、期限日、優先度、カテゴリー）

---

## 非機能要件

### セキュリティ
- パスワードのハッシュ化（BCryptPasswordEncoder）
- JWTトークンの安全な管理
- SQLインジェクション対策（ORMの適切な使用）
- XSS対策（入力のサニタイゼーション）
- CSRF対策
- HTTPS通信（本番環境）

### パフォーマンス
- APIレスポンス時間: 平均500ms以下
- ページロード時間: 3秒以内
- データベースクエリの最適化（インデックス設定）

### 保守性
- コードの可読性
- 適切なコメント
- READMEドキュメント
- APIドキュメント（Swagger / OpenAPI）

---

## 学んだ重要な概念

### 要件定義の重要性

**なぜ要件定義が必要か:**
1. **開発の方向性を明確にする**
   - 何を作るのか、何を作らないのかを明確化
   - チーム全員（または自分自身）が同じ認識を持つ

2. **スコープクリープを防ぐ**
   - 「あれもこれも」と機能が膨らむのを防ぐ
   - Phase分けで段階的に開発

3. **設計の基準となる**
   - データベース設計、API設計、UI設計のすべての基礎

### Phase分けの考え方

**MVP（Minimum Viable Product）ファースト:**
- 最小限の機能で動くものを最初に作る
- ユーザー（または自分）にフィードバックをもらう
- フィードバックを基に次のフェーズを計画

**Phase分けのメリット:**
1. 小さな成功体験を積める
2. 途中で方向転換できる
3. モチベーションを維持しやすい
4. 各Phaseで学習と実装を繰り返せる

### 技術選定の理由を明確にする

**今回の選定理由:**
- **Spring Boot**:
  - Java学習の延長線上
  - エンタープライズ開発で広く使われている
  - 豊富なドキュメントとコミュニティ

- **PostgreSQL**:
  - オープンソースで無料
  - 高機能なRDBMS
  - Spring Bootとの連携が容易

- **JWT認証**:
  - ステートレスな認証
  - スケーラビリティが高い
  - モバイルアプリへの拡張が容易

- **Vanilla JS（フロントエンド）**:
  - フレームワークに依存しない基礎を学ぶ
  - 軽量で高速
  - 後からReactやVueに移行可能

---

## 要件定義で工夫したポイント

### 1. 段階的な開発計画

一度にすべてを実装するのではなく、3つのPhaseに分割：
- Phase 1: 動くものを最速で作る
- Phase 2: 差別化機能（時間管理）を追加
- Phase 3: より高度な機能を追加

### 2. 将来の拡張を見据えた設計

**初期段階で含めたもの:**
- マルチユーザー対応（最初から）
- 論理削除（物理削除ではなく）
- UUID（連番ではなく）

**理由:**
- 後から変更するとマイグレーションが大変
- 最初から正しい設計にする

### 3. 非機能要件も明記

機能だけでなく、以下も明記：
- セキュリティ要件
- パフォーマンス要件
- 保守性要件

**理由:**
- 実装時の判断基準になる
- 品質を担保できる

---

## 次のステップ

要件定義が完了したので、次は以下を実施：

1. **データベース設計**
   - テーブル定義
   - リレーション定義
   - インデックス設計
   - ER図作成

2. **API設計**
   - エンドポイント定義
   - リクエスト・レスポンススキーマ
   - エラーレスポンス定義
   - バリデーションルール

3. **ワイヤーフレーム作成**
   - 各画面のレイアウト
   - 画面遷移図
   - 必要なデータの洗い出し

---

## まとめ

要件定義を作成することで、プロジェクトの全体像が明確になりました。

**達成したこと:**
- ✅ プロジェクトの目的を明確化
- ✅ 技術スタックの選定
- ✅ 段階的な開発計画（Phase 1-3）
- ✅ 機能要件の整理
- ✅ データモデルの概要設計
- ✅ API設計の概要
- ✅ UI/UX要件の定義
- ✅ 非機能要件の明記

**学んだこと:**
- 要件定義の重要性
- Phase分けの考え方
- MVPファーストの開発手法
- 技術選定の理由を明確にすることの重要性

**次のフェーズ:**
これらの要件を基に、詳細な設計（データベース、API、UI）を行います。

---

**作成日**: 2026-01-13
**WBS進捗**: 1.1 設計フェーズ - 要件定義 完了
