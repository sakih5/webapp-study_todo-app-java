# 作業ログ: 2026-02-12 (テスト・デバッグフェーズ開始)

## 学習情報

- **日付**: 2026-02-12
- **学習フェーズ**: WBS 1.7（テスト・デバッグ）開始
- **ステータス**: 作業中

---

## 実施内容

### 1. テストシナリオ実施

以下の3シナリオを実施し、バグを洗い出した。

**シナリオA: 新規ユーザーの基本操作**
- ユーザー登録 → ログイン → カテゴリー作成 → Todo作成 → 完了チェック → 編集 → 削除 → カテゴリー編集 → カテゴリー削除

**シナリオB: 異常系テスト**
- 間違ったパスワード、重複メール、タイトル空欄、パスワード不一致 → 問題なし

**シナリオC: ブラウザ操作**
- ブラウザ更新、ログアウト → リダイレクト確認 → 問題なし

### 2. バグ修正（一部完了）

- #1（完了チェックで詳細と期限が消える）を修正完了

---

## 発見したバグ・問題一覧

| # | 問題 | 優先度 | ステータス | 原因 | 修正内容 |
|---|------|--------|-----------|------|----------|
| 1 | 完了チェックで詳細と期限が消える | 致命的 | **修正済み** | TodoService.updateが全フィールドを上書きしていた。チェックボックス変更時はtitleとisCompletedしか送らないため、他がnullで上書きされた | TodoService.updateでnullのフィールドは上書きしないように修正（TODO_backlog #1 の対応） |
| 2 | 削除したカテゴリがTodo一覧に表示される | 致命的 | **作業中** | カテゴリー論理削除時に、そのカテゴリーを使っているTodoのcategoryIdがそのまま残る | CategoryService.deleteで、該当Todoのcategoryをnullにする処理を追加中（TODO_backlog #4 の対応） |
| 3 | index.htmlにカテゴリー管理画面へのリンクが無い | 致命的 | 未着手 | HTMLにリンクを追加していなかった | index.htmlにcategory.htmlへのリンクを追加する |
| 4 | index.htmlにログアウトボタンが無い | 気になる | 未着手 | 未実装 | ボタン追加、クリックでlocalStorageのトークンを削除してlogin.htmlへリダイレクト |
| 5 | カテゴリー管理画面で色登録時にカラーパレットが見えない | 気になる | 未着手 | inputのtypeがtextのため | category.htmlのcolorフィールドのtypeをcolorに変更する |

---

## 次回の再開ポイント

バグ #2 の修正途中から再開：
- `CategoryService.java` の `delete` メソッドで以下を実装する：
  1. ~~削除対象カテゴリーを使っているTodoの一覧を取得する~~ ← 途中まで記述済み
  2. それぞれの `category` を null にする
  3. 保存する
- `TodoRepository` に `findByCategory` 系のメソッドを追加する必要あり

バグ #2 完了後は #3 → #4 → #5 の順で対応する。

---

**作成日**: 2026-02-12
